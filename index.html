<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Touchstone by CloudByteStorages</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Touchstone</h1>
      <h2 class="project-tagline">Testing for Infrastructure w.r.t Storage</h2>
      <a href="https://github.com/CloudByteStorages/touchstone" class="btn">View on GitHub</a>
      <a href="https://github.com/CloudByteStorages/touchstone/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/CloudByteStorages/touchstone/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="touchstone" class="anchor" href="#touchstone" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>TOUCHSTONE</h1>

<ul>
<li>Thoughts on testing practices</li>
<li>Ideas and implementation or reuse of best fit libraries for automation</li>
</ul>

<h3>
<a id="need-for-a-test-automation" class="anchor" href="#need-for-a-test-automation" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Need for a Test Automation</h3>

<ul>
<li>It has been a desire to achieve test automation so that a developer can 

<ul>
<li>make continuous changes to the code base without impacting any existing feature.</li>
</ul>
</li>
<li>However, can this be simple to use ?

<ul>
<li>Easy enough for a non-technical person to add/modify the test routines</li>
<li>The resource need not spend hours to do so</li>
<li>Resource may imply a QA engineer, Business Analyst, or an admin.</li>
</ul>
</li>
<li>It will be great to run the test cases from one's laptop, 

<ul>
<li>These would be fine tuned &amp; later be moved to some build setups.</li>
<li>Emphasis is given to the environment that is running the tests.</li>
</ul>
</li>
<li>To summarize, it will be good to have test automation that can be 

<ul>
<li>easy to develop, </li>
<li>easy to run, &amp; </li>
<li>easy to set up in different environments.</li>
</ul>
</li>
</ul>

<h3>
<a id="what-kind-of-test-automation-should-we-implement-" class="anchor" href="#what-kind-of-test-automation-should-we-implement-" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>What kind of Test Automation should we implement ?</h3>

<p>Let me quote an email from OpenStack forums: </p>

<blockquote>
<p><strong>"</strong> If a method is conceivably testable with unit tests (without over relying on mock), 
that is preferable. Failing that, functional tests are the way to go. 
The general idea is to test bottom up: </p>

<ul>
<li>   Lots of unit tests,</li>
<li>   fewer functional tests,</li>
<li>   fewer API/integration/fullstack tests,</li>
</ul>

<p>It is difficult to test the agent with unit tests effectively, 
which is why I encourage developers to test via functional, mock-less tests. <strong>"</strong></p>
</blockquote>

<p>This is another quote from James Strachan's Weblog - Friday Aug 29, 2003</p>

<blockquote>
<p><strong>"</strong>
I'm finding that most time spent in a TDD style development model is </p>

<ul>
<li>coding the unit tests. </li>
</ul>

<p>There's typically lots of unit test code for little application code. 
Also there does seem to be some baggage when writing unit tests in java. 
This seems a great opportunity for using a concise &amp; powerful dynamically typed language. 
<strong>"</strong></p>
</blockquote>

<h4>
<a id="lets-think-about-the-issues-faced-to-implement-above-strategies" class="anchor" href="#lets-think-about-the-issues-faced-to-implement-above-strategies" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Lets think about the issues faced to implement above strategies:</h4>

<ul>
<li>Brittle unit tests</li>
<li>No end to writing unit tests</li>
</ul>

<h4>
<a id="solutions-the-mitigate-these-issues" class="anchor" href="#solutions-the-mitigate-these-issues" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Solutions the mitigate these issues:</h4>

<ul>
<li>Wide variety of tools make writing unit testing a breeze.

<ul>
<li>e.g. property based testing via <a href="http://www.scalacheck.org/">scalacheck</a>
</li>
<li>e.g. data driven testing via <a href="http://spockframework.github.io/spock/docs/">spock</a>
</li>
</ul>
</li>
<li>Writing code using functional ways

<ul>
<li>e.g. one may write java or python code thinking of functional constructs</li>
<li>e.g. java has java.util.function package</li>
<li>this reduces the lines of code</li>
<li>this in turn reduces the effort spent on writing unit test code</li>
<li>remember less code implies less bugs</li>
<li>leads to unit tests without 'mocks' </li>
<li>leads to running tests locally that are more closer to production environment.</li>
</ul>
</li>
<li>Use of IDEs</li>
<li>Use of static tools for linting the code

<ul>
<li>these will help us find out a lot of bugs during code itself</li>
</ul>
</li>
<li>Use of functional languages

<ul>
<li>these requires a significant leap of faith</li>
<li>if we do manage this the benefits are plenty</li>
<li>we end up writing clear, concise, better intent, readable &amp; testable code</li>
<li>source code as well as unit test code is not longer brittle</li>
<li>this approach defintely tackles bugs &amp; issues in a proactive manner</li>
</ul>
</li>
</ul>

<h3>
<a id="evolution-of-test-automation" class="anchor" href="#evolution-of-test-automation" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Evolution of Test Automation:</h3>

<ul>
<li>It will be great if the test automation can eventually be used to inject faults &amp; check if the system is resilient.</li>
<li>The fault injection test cases can be based out of the source code design as well as based on faults in the overall environment.</li>
<li>It is assumed that dedicated engineering thought process needs to go behind designing &amp; building fault injection test cases.</li>
</ul>

<h3>
<a id="functional--integration-test-automation" class="anchor" href="#functional--integration-test-automation" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Functional &amp; Integration Test Automation</h3>

<ul>
<li>Since a typical management layer is exposed via the REST layer, we can get code coverage of ~70% by utilizing the REST layer.</li>
<li>Given the 80:20 rule, and above justification, we should be spending most of our efforts into functional testing.</li>
<li>Hence, we need to think about various teams making a contribution towards this automated functional testing.</li>
<li>If the REST uses JSON, we might get tempted towards use of JavaScript libraries.</li>
<li>However, every programming language has made use of JSON a breeze.</li>
<li>We should be looking into libraries or languages that are less verbose &amp; are more DSL (Domain Specific Language) friendly.</li>
<li>Not only the Developer but also the Business Analyst, Quality Analyst, Infra Engineer, Support Engineer etc. should be able to create a automated functional test case with ease.</li>
</ul>

<h3>
<a id="fault-injection-testing--unit-testing-the-elasticenter" class="anchor" href="#fault-injection-testing--unit-testing-the-elasticenter" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Fault Injection Testing &amp; Unit Testing the ElastiCenter</h3>

<ul>
<li>While testing the storage via REST layer seems to solve 70% of use cases, we need to think of an alternative design that can test the rest 30%</li>
<li>Spock is assumed to meet the fault injection requirements w.r.t ElastiCenter that is Java based.</li>
<li>Below are some of things that we need to try using Spock in order to inject faults:</li>
<li>Change the behavior at runtime</li>
<li>Run the Spock specs programmatically against any running EC environment.</li>
<li>Ability to run specific Spock specs</li>
<li>Ability to build jars that contains the Spock specs. These jars will be deployed in a running EC &amp; test cases would be invoked from a CLI.</li>
<li>One is not limited to use Spock. One may think of using various Mock libraries to meet one's goal.</li>
</ul>

<h3>
<a id="touchstons-sub-projects" class="anchor" href="#touchstons-sub-projects" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Touchston's Sub-Projects</h3>

<ul>
<li>touchstone

<ul>
<li>DSL wrapper over CLI</li>
</ul>
</li>
<li>resto

<ul>
<li>DSL wrapper over REST API</li>
</ul>
</li>
<li>automaton

<ul>
<li>TAP based automation that takes into account above</li>
</ul>
</li>
<li>3rd party libraries

<ul>
<li><a href="https://github.com/openzfs/openzfs/tree/master/usr/src/test">https://github.com/openzfs/openzfs/tree/master/usr/src/test</a></li>
<li>openstack temptest suite</li>
<li>vmware certification</li>
</ul>
</li>
</ul>

<h3>
<a id="references" class="anchor" href="#references" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>References</h3>

<ul>
<li><a href="https://github.com/vlucas/frisby">https://github.com/vlucas/frisby</a></li>
<li><a href="https://github.com/jeffbski/bench-rest">https://github.com/jeffbski/bench-rest</a></li>
<li><a href="https://dzone.com/articles/you-cant-test-all-the-things-api-iot-roi-tbd?utm_content=bufferbf217&amp;utm_medium=social&amp;utm_source=twitter.com&amp;utm_campaign=buffer">https://dzone.com/articles/you-cant-test-all-the-things-api-iot-roi-tbd?utm_content=bufferbf217&amp;utm_medium=social&amp;utm_source=twitter.com&amp;utm_campaign=buffer</a></li>
<li><a href="https://wiki.freebsd.org/SummerOfCodeIdeas#TEST-o-steron_for_FreeBSD_.28node.js.2FLua.29">https://wiki.freebsd.org/SummerOfCodeIdeas#TEST-o-steron_for_FreeBSD_.28node.js.2FLua.29</a></li>
<li><a href="http://www.lingua-systems.com/unit-testing/">http://www.lingua-systems.com/unit-testing/</a></li>
<li><a href="https://github.com/spockframework/spock">https://github.com/spockframework/spock</a></li>
<li><a href="https://github.com/openzfs/openzfs/tree/master/usr/src/test">https://github.com/openzfs/openzfs/tree/master/usr/src/test</a></li>
<li><a href="http://www.slideshare.net/araujobsd/functional-and-scale-performance-tests-using-zopkio">http://www.slideshare.net/araujobsd/functional-and-scale-performance-tests-using-zopkio</a></li>
<li><a href="https://github.com/linkedin/Zopkio">https://github.com/linkedin/Zopkio</a></li>
<li><a href="https://github.com/zfsonlinux/zfs-auto-snapshot/blob/master/src/zfs-auto-snapshot.sh">https://github.com/zfsonlinux/zfs-auto-snapshot/blob/master/src/zfs-auto-snapshot.sh</a></li>
</ul>

<h5>
<a id="shell-scripting-using-groovy" class="anchor" href="#shell-scripting-using-groovy" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Shell Scripting Using Groovy</h5>

<ul>
<li>#!/usr/bin/env groovy</li>
<li>Say bye to cumbersome bash scripts (smile)</li>
<li><a href="https://github.com/aestasit/sshoogr">https://github.com/aestasit/sshoogr</a></li>
</ul>

<h5>
<a id="modular--filefolder-structure--coding-standards-for-shell-scripts" class="anchor" href="#modular--filefolder-structure--coding-standards-for-shell-scripts" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Modular &amp; file/folder Structure &amp; Coding Standards for Shell Scripts</h5>

<ul>
<li><a href="https://github.com/technopagan/adept-jpg-compressor/blob/master/unittests/tests_adept.bats">https://github.com/technopagan/adept-jpg-compressor/blob/master/unittests/tests_adept.bats</a></li>
<li><a href="https://github.com/aaronroyer/shy/blob/master/test/shy.bats">https://github.com/aaronroyer/shy/blob/master/test/shy.bats</a></li>
<li><a href="https://github.com/technopagan/adept-jpg-compressor/blob/master/adept.sh">https://github.com/technopagan/adept-jpg-compressor/blob/master/adept.sh</a></li>
<li><a href="http://www.doublecloud.org/2015/05/vmware-esxi-esxcli-command-a-quick-tutorial/">http://www.doublecloud.org/2015/05/vmware-esxi-esxcli-command-a-quick-tutorial/</a></li>
</ul>

<h5>
<a id="management-tool-for-shell" class="anchor" href="#management-tool-for-shell" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Management Tool for Shell</h5>

<ul>
<li>
<a href="https://github.com/aaronroyer/shy">https://github.com/aaronroyer/shy</a> </li>
<li><a href="https://blog.engineyard.com/2014/bats-test-command-line-tools">https://blog.engineyard.com/2014/bats-test-command-line-tools</a></li>
<li><a href="https://github.com/sstephenson/bats">https://github.com/sstephenson/bats</a></li>
<li><a href="http://stackoverflow.com/questions/687948/timeout-a-command-in-bash-without-unnecessary-delay">http://stackoverflow.com/questions/687948/timeout-a-command-in-bash-without-unnecessary-delay</a></li>
</ul>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/CloudByteStorages/touchstone">Touchstone</a> is maintained by <a href="https://github.com/CloudByteStorages">CloudByteStorages</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
